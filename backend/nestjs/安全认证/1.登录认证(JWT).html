<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>kkzzyytçš„ä¸ªäººè®°å½• | kkzzyytçš„ä¸ªäººè®°å½•</title>
    <meta name="description" content="Talk is cheap, show me your code.">
    <link rel="preload stylesheet" href="/blog/assets/style.74d9b1b1.css" as="style">
    
    <script type="module" src="/blog/assets/app.a086eb3e.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.01edc906.js">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.81c0dc4b.js">
    <link rel="modulepreload" href="/blog/assets/backend_nestjs_å®‰å…¨è®¤è¯_1.ç™»å½•è®¤è¯(JWT).md.9353c18b.lean.js">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6284acba><!--[--><!--]--><!--[--><span tabindex="-1" data-v-82f3cb66></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-82f3cb66> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6284acba data-v-67c8a58c><div class="VPNavBar has-sidebar" data-v-67c8a58c data-v-d094a9cd><div class="container" data-v-d094a9cd><div class="title" data-v-d094a9cd><div class="VPNavBarTitle has-sidebar" data-v-d094a9cd data-v-9f17e1eb><a class="title" href="/blog/" data-v-9f17e1eb><!--[--><!--]--><!--[--><img class="VPImage logo" src="/blog/img/logo.png" alt data-v-881f6afe><!--]--><!--[-->ğŸ“ code<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-d094a9cd><div class="curtain" data-v-d094a9cd></div><div class="content-body" data-v-d094a9cd><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-d094a9cd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d094a9cd data-v-70755f9a><span id="main-nav-aria-label" class="visually-hidden" data-v-70755f9a>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/index.html" tabindex="0" data-v-70755f9a data-v-3b3cd99c><!--[--><span data-v-3b3cd99c>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-70755f9a data-v-58b1f253><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-58b1f253><span class="text" data-v-58b1f253><!----><span data-v-58b1f253>å‰ç«¯å°é£Ÿå ‚</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-58b1f253><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-58b1f253><div class="VPMenu" data-v-58b1f253 data-v-d0aac7fb><div class="items" data-v-d0aac7fb><!--[--><!--[--><div class="VPMenuGroup" data-v-d0aac7fb data-v-7f9c2b2d><p class="title" data-v-7f9c2b2d>åŸºæœ¬åŠŸ</p><!--[--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/html/" data-v-b4a6105c><!--[-->Html<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/css/" data-v-b4a6105c><!--[-->CSS<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/javascript/" data-v-b4a6105c><!--[-->JavaScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/typescript/" data-v-b4a6105c><!--[-->TypeScript<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-d0aac7fb data-v-7f9c2b2d><p class="title" data-v-7f9c2b2d>æ¡†æ¶</p><!--[--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/react/" data-v-b4a6105c><!--[-->React<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/vue/" data-v-b4a6105c><!--[-->Vue<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-d0aac7fb data-v-7f9c2b2d><p class="title" data-v-7f9c2b2d>ä¸°å¯Œèµ„æº</p><!--[--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/frontend/ui/" data-v-b4a6105c><!--[-->ç»„ä»¶åº“<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-70755f9a data-v-58b1f253><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-58b1f253><span class="text" data-v-58b1f253><!----><span data-v-58b1f253>åç«¯è‡ªä¹ å®¤</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-58b1f253><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-58b1f253><div class="VPMenu" data-v-58b1f253 data-v-d0aac7fb><div class="items" data-v-d0aac7fb><!--[--><!--[--><div class="VPMenuGroup" data-v-d0aac7fb data-v-7f9c2b2d><p class="title" data-v-7f9c2b2d>æ¡†æ¶</p><!--[--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/backend/nestjs/" data-v-b4a6105c><!--[-->NestJS<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-d0aac7fb data-v-7f9c2b2d><p class="title" data-v-7f9c2b2d>æœåŠ¡</p><!--[--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/backend/nginx/" data-v-b4a6105c><!--[-->Nginx<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7f9c2b2d data-v-b4a6105c><a class="VPLink link" href="/blog/backend/gitLearn/" data-v-b4a6105c><!--[-->Git<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-d094a9cd data-v-8ef61f71><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-8ef61f71 data-v-8d1c8693 data-v-9c3a0906><span class="check" data-v-9c3a0906><span class="icon" data-v-9c3a0906><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8d1c8693><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8d1c8693><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d094a9cd data-v-ff9a62a8 data-v-5ad38951><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zhu325" aria-label="github" target="_blank" rel="noopener" data-v-5ad38951 data-v-e085e322><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d094a9cd data-v-42e60ece data-v-58b1f253><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-58b1f253><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-58b1f253><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-58b1f253><div class="VPMenu" data-v-58b1f253 data-v-d0aac7fb><!----><!--[--><!--[--><!----><div class="group" data-v-42e60ece><div class="item appearance" data-v-42e60ece><p class="label" data-v-42e60ece>Appearance</p><div class="appearance-action" data-v-42e60ece><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-42e60ece data-v-8d1c8693 data-v-9c3a0906><span class="check" data-v-9c3a0906><span class="icon" data-v-9c3a0906><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8d1c8693><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8d1c8693><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-42e60ece><div class="item social-links" data-v-42e60ece><div class="VPSocialLinks social-links-list" data-v-42e60ece data-v-5ad38951><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zhu325" aria-label="github" target="_blank" rel="noopener" data-v-5ad38951 data-v-e085e322><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d094a9cd data-v-b9d21bbb><span class="container" data-v-b9d21bbb><span class="top" data-v-b9d21bbb></span><span class="middle" data-v-b9d21bbb></span><span class="bottom" data-v-b9d21bbb></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-6284acba data-v-460e914a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-460e914a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-460e914a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-460e914a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-460e914a data-v-96dd8966><button data-v-96dd8966>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-6284acba data-v-a7ebba09><div class="curtain" data-v-a7ebba09></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a7ebba09><span class="visually-hidden" id="sidebar-aria-label" data-v-a7ebba09> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-a7ebba09><section class="VPSidebarItem level-0 collapsible" data-v-a7ebba09 data-v-62317b56><div class="item" role="button" tabindex="0" data-v-62317b56><div class="indicator" data-v-62317b56></div><h2 class="text" data-v-62317b56>NestJSåŸºç¡€</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-62317b56><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-62317b56><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-62317b56><!--[--><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E5%9F%BA%E7%A1%80/1.%E4%B9%9D%E5%A4%A7%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>1.ä¹å¤§æ ¸å¿ƒæ¦‚å¿µ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E5%9F%BA%E7%A1%80/2.%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%B0%8F%E7%BB%93.html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>2.æ ¸å¿ƒæ¦‚å¿µå°ç»“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E5%9F%BA%E7%A1%80/3.ExecutionContext.html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>3.ExecutionContext</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a7ebba09><section class="VPSidebarItem level-0 collapsible" data-v-a7ebba09 data-v-62317b56><div class="item" role="button" tabindex="0" data-v-62317b56><div class="indicator" data-v-62317b56></div><h2 class="text" data-v-62317b56>NestJSè¿›é˜¶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-62317b56><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-62317b56><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-62317b56><!--[--><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/1.%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>1.ä¾èµ–æ³¨å…¥</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/2.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>2.ç”Ÿå‘½å‘¨æœŸ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/3.%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2(%E2%9A%91).html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>3.æ‰“åŒ…éƒ¨ç½²(âš‘)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/4.%E6%95%B4%E5%90%88prisma(todo).html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>4.æ•´åˆprisma(todo)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/5.%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE(todo).html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>5.é«˜çº§é…ç½®(todo)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/6.%E7%BC%93%E5%AD%98(todo).html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>6.ç¼“å­˜(todo)</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a7ebba09><section class="VPSidebarItem level-0 collapsible has-active" data-v-a7ebba09 data-v-62317b56><div class="item" role="button" tabindex="0" data-v-62317b56><div class="indicator" data-v-62317b56></div><h2 class="text" data-v-62317b56>å®‰å…¨è®¤è¯</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-62317b56><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-62317b56><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-62317b56><!--[--><div class="VPSidebarItem level-1 is-link" data-v-62317b56 data-v-62317b56><div class="item" data-v-62317b56><div class="indicator" data-v-62317b56></div><a class="VPLink link link" href="/blog/backend/nestjs/%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81/1.%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81(JWT).html" data-v-62317b56><!--[--><p class="text" data-v-62317b56>1.ç™»å½•è®¤è¯(JWT)</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6284acba data-v-078871f0><div class="VPDoc has-sidebar has-aside" data-v-078871f0 data-v-2cdec040><!--[--><!--]--><div class="container" data-v-2cdec040><div class="aside" data-v-2cdec040><div class="aside-curtain" data-v-2cdec040></div><div class="aside-container" data-v-2cdec040><div class="aside-content" data-v-2cdec040><div class="VPDocAside" data-v-2cdec040 data-v-5f87bc6e><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-5f87bc6e data-v-3d706213><div class="content" data-v-3d706213><div class="outline-marker" data-v-3d706213></div><div class="outline-title" role="heading" data-v-3d706213>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-3d706213><span class="visually-hidden" id="doc-outline-aria-label" data-v-3d706213> Table of Contents for current page </span><ul class="root" data-v-3d706213 data-v-717ff320><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-5f87bc6e></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-2cdec040><div class="content-container" data-v-2cdec040><!--[--><!--]--><!----><main class="main" data-v-2cdec040><div style="position:relative;" class="vp-doc _blog_backend_nestjs_%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81_1_%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81(JWT)" data-v-2cdec040><div><blockquote><p>è¯¥æ–‡å¯ä»¥è¯´æ˜¯å¯¹ç…§å®˜ç½‘çš„å­¦ä¹ ç¬”è®°ï¼Œä½¿ç”¨æµè¡Œçš„passportï¼Œé¡ºåºæœ‰æ‰€æ”¹å˜ï¼Œå…³äºè‡ªå®šä¹‰Passportè®¤è¯çš„æ–¹æ³•ï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼š<strong>å…ˆæ³¨å†Œå¯¼å…¥ç›¸åº”xxxModuleï¼Œæä¾›å¯¹åº”xxxStrategyï¼Œæ„å»ºå¯¹åº”xxxAuthGuardï¼Œæœ€åç›´æ¥ä½¿ç”¨UseGuards()</strong></p></blockquote><ul><li>å¯¹äºpassport-localéªŒè¯ï¼šå¯¼å…¥PassportModuleï¼Œæä¾›LocalStrategyï¼Œæ„å»ºLocalAuthGuardï¼Œä½¿ç”¨UseGuards(LocalAuthGuard)</li><li>å¯¹äºpassport-jwtéªŒè¯ï¼šå¯¼å…¥JwtModuleï¼Œæä¾›JwtStrategyï¼Œæ„å»ºJwtAuthGuardï¼Œä½¿ç”¨UseGuards(JwtAuthGuard)</li></ul><h2 id="ä¸€ã€å®‰è£…ç›¸åº”ä¾èµ–" tabindex="-1">ä¸€ã€å®‰è£…ç›¸åº”ä¾èµ– <a class="header-anchor" href="#ä¸€ã€å®‰è£…ç›¸åº”ä¾èµ–" aria-label="Permalink to &quot;ä¸€ã€å®‰è£…ç›¸åº”ä¾èµ–&quot;">â€‹</a></h2><p>nestjsæœ‰è‡ªå·±å°è£…å¥½çš„åº“ï¼Œè¿™é‡Œå§passport-localç”¨åˆ°çš„åº“ä¸€å¹¶å®‰è£…</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ npm install --save @nestjs/passport passport passport-local</span></span>
<span class="line"><span style="color:#e1e4e8;">$ npm install --save-dev @types/passport-local</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ npm install --save @nestjs/passport passport passport-local</span></span>
<span class="line"><span style="color:#24292e;">$ npm install --save-dev @types/passport-local</span></span></code></pre></div><p>åŸç”Ÿçš„passportéœ€è¦æä¾›ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ul><li>é’ˆå¯¹ç‰¹å®šçš„ç­–ç•¥ï¼Œæä¾›ä¸€ç³»åˆ—é…ç½®ï¼Œå¦‚jwtéœ€è¦ä¸€ä¸ªsecretå¯†é’¥ç”¨æ¥ç”Ÿæˆtoken</li><li>ä¸€ä¸ªéªŒè¯çš„å›è°ƒå‡½æ•°ï¼ŒéªŒè¯é€šè¿‡è¿”å›æ•´ä¸ªç”¨æˆ·ä¿¡æ¯ï¼ŒéªŒè¯é”™è¯¯è¿”å›nullï¼ŒéªŒè¯é”™è¯¯å¯ä»¥æ˜¯ç”¨æˆ·æ²¡æ‰¾åˆ°æˆ–è€…ç”¨æˆ·å¯†ç ä¸åŒ¹é…</li></ul><p>ä½¿ç”¨@nestjs/passportï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿PassportStrategy(Stratery, name?)ï¼Œé€šè¿‡super()æ–¹æ³•ä¼ å…¥é…ç½®ä¿¡æ¯(å¯¹åº”æ­¥éª¤1)ï¼Œåœ¨è¯¥ç±»ä¸­å®ç°validate()æ–¹æ³•ç”¨æ¥åšéªŒè¯(å¯¹åº”æ­¥éª¤2)</p><h2 id="äºŒã€ä½¿ç”¨passport-localæ­¥éª¤" tabindex="-1">äºŒã€ä½¿ç”¨passport-localæ­¥éª¤ <a class="header-anchor" href="#äºŒã€ä½¿ç”¨passport-localæ­¥éª¤" aria-label="Permalink to &quot;äºŒã€ä½¿ç”¨passport-localæ­¥éª¤&quot;">â€‹</a></h2><h3 id="_1-æ–°å»ºauth-moduleã€auth-service" tabindex="-1">1. æ–°å»ºauth-moduleã€auth-service <a class="header-anchor" href="#_1-æ–°å»ºauth-moduleã€auth-service" aria-label="Permalink to &quot;1. æ–°å»ºauth-moduleã€auth-service&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ nest g module auth</span></span>
<span class="line"><span style="color:#e1e4e8;">$ nest g service auth</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ nest g module auth</span></span>
<span class="line"><span style="color:#24292e;">$ nest g service auth</span></span></code></pre></div><h3 id="_2-å¯¼å…¥ç›¸åº”module" tabindex="-1">2. å¯¼å…¥ç›¸åº”Module <a class="header-anchor" href="#_2-å¯¼å…¥ç›¸åº”module" aria-label="Permalink to &quot;2. å¯¼å…¥ç›¸åº”Module&quot;">â€‹</a></h3><p>å¢åŠ PassportModuleï¼Œä½¿ç”¨Passportçš„ä¸€ç³»åˆ—ç‰¹æ€§</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Module } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AuthService } from &#39;./auth.service&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { PassportModule } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Module({</span></span>
<span class="line"><span style="color:#e1e4e8;">  imports: [UserModule, PassportModule],</span></span>
<span class="line"><span style="color:#e1e4e8;">  providers: [AuthService],</span></span>
<span class="line"><span style="color:#e1e4e8;">})</span></span>
<span class="line"><span style="color:#e1e4e8;">export class AuthModule {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Module } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AuthService } from &#39;./auth.service&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { PassportModule } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Module({</span></span>
<span class="line"><span style="color:#24292e;">  imports: [UserModule, PassportModule],</span></span>
<span class="line"><span style="color:#24292e;">  providers: [AuthService],</span></span>
<span class="line"><span style="color:#24292e;">})</span></span>
<span class="line"><span style="color:#24292e;">export class AuthModule {}</span></span></code></pre></div><h4 id="åœ¨authmoduleä¸­å¼•å…¥userservice" tabindex="-1">åœ¨AuthModuleä¸­å¼•å…¥UserService <a class="header-anchor" href="#åœ¨authmoduleä¸­å¼•å…¥userservice" aria-label="Permalink to &quot;åœ¨AuthModuleä¸­å¼•å…¥UserService&quot;">â€‹</a></h4><p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨UserServiceï¼Œå®˜ç½‘ä¸Šçš„åšæ³•æ˜¯ç›´æ¥åœ¨importsä¸­å¯¼å…¥äº†UserModuleï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™é‡Œåªæ˜¯éœ€è¦ä½¿ç”¨UserServiceæä¾›çš„æ–¹æ³•ï¼Œæ„Ÿè§‰æ²¡å¿…è¦å¯¼å…¥ï¼Œæä¾›ä¸€ä¸ªUserServiceå°±å¤Ÿäº†</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">@Module({</span></span>
<span class="line"><span style="color:#e1e4e8;">  ...,</span></span>
<span class="line"><span style="color:#e1e4e8;">  providers: [AuthServiceï¼ŒUserService],</span></span>
<span class="line"><span style="color:#e1e4e8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">@Module({</span></span>
<span class="line"><span style="color:#24292e;">  ...,</span></span>
<span class="line"><span style="color:#24292e;">  providers: [AuthServiceï¼ŒUserService],</span></span>
<span class="line"><span style="color:#24292e;">})</span></span></code></pre></div><h4 id="ç¼–å†™auth-service-ts" tabindex="-1">ç¼–å†™auth.service.ts <a class="header-anchor" href="#ç¼–å†™auth-service-ts" aria-label="Permalink to &quot;ç¼–å†™auth.service.ts&quot;">â€‹</a></h4><p>æ³¨æ„ï¼šè¿™ä¸€æ­¥å…¶å®å¹¶ä¸æ˜¯å¿…é¡»çš„æ­¥éª¤ï¼Œåªæ˜¯ä¸ºæŠŠåé¢ç­–ç•¥ä¸­éªŒè¯ç”¨æˆ·åå¯†ç çš„ä»£ç å•ç‹¬å‰¥ç¦»å‡ºæ¥è€Œå·²ï¼Œè¿™ä¸ªServiceä¸­æ¶‰åŠåˆ°æ“ä½œæ•°æ®åº“ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹ æƒ¯æŠŠç›´æ¥è·Ÿæ•°æ®åº“æ‰“äº¤é“çš„éƒ½æ”¾åˆ°Serviceä¸­</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Injectable, Logger } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { UserService } from &#39;../user/user.service&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import * as bcrypt from &#39;bcrypt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class AuthService {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor(</span></span>
<span class="line"><span style="color:#e1e4e8;">    private readonly userService: UserService,</span></span>
<span class="line"><span style="color:#e1e4e8;">    private readonly logger: Logger,</span></span>
<span class="line"><span style="color:#e1e4e8;">  ) {}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"> async validateUser(username: string, pass: string) {</span></span>
<span class="line"><span style="color:#e1e4e8;">     //è¿™é‡Œæ˜¯è¿æ¥äº†æ•°æ®åº“ï¼Œæ ¹æ®usernameæŸ¥æ‰¾ç”¨æˆ·çš„æ“ä½œï¼Œç»ƒä¹ æ—¶å¯ä»¥ç¡¬ç¼–ç </span></span>
<span class="line"><span style="color:#e1e4e8;">    const user = await this.userService.findOneByUsername(username);</span></span>
<span class="line"><span style="color:#e1e4e8;">    if (user) {</span></span>
<span class="line"><span style="color:#e1e4e8;">      const match = await bcrypt.compare(pass, user.password);</span></span>
<span class="line"><span style="color:#e1e4e8;">      if (match) {</span></span>
<span class="line"><span style="color:#e1e4e8;">        this.logger.log(&#39;ç”¨æˆ·åå¯†ç è®¤è¯æˆåŠŸ&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">        const { password, ...result } = user;</span></span>
<span class="line"><span style="color:#e1e4e8;">        return result;</span></span>
<span class="line"><span style="color:#e1e4e8;">      }</span></span>
<span class="line"><span style="color:#e1e4e8;">      this.logger.error(&#39;å¯†ç é”™è¯¯.&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">    this.logger.error(&#39;ç”¨æˆ·åå¯†ç è®¤è¯å¤±è´¥&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">    return null;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Injectable, Logger } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { UserService } from &#39;../user/user.service&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import * as bcrypt from &#39;bcrypt&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class AuthService {</span></span>
<span class="line"><span style="color:#24292e;">  constructor(</span></span>
<span class="line"><span style="color:#24292e;">    private readonly userService: UserService,</span></span>
<span class="line"><span style="color:#24292e;">    private readonly logger: Logger,</span></span>
<span class="line"><span style="color:#24292e;">  ) {}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"> async validateUser(username: string, pass: string) {</span></span>
<span class="line"><span style="color:#24292e;">     //è¿™é‡Œæ˜¯è¿æ¥äº†æ•°æ®åº“ï¼Œæ ¹æ®usernameæŸ¥æ‰¾ç”¨æˆ·çš„æ“ä½œï¼Œç»ƒä¹ æ—¶å¯ä»¥ç¡¬ç¼–ç </span></span>
<span class="line"><span style="color:#24292e;">    const user = await this.userService.findOneByUsername(username);</span></span>
<span class="line"><span style="color:#24292e;">    if (user) {</span></span>
<span class="line"><span style="color:#24292e;">      const match = await bcrypt.compare(pass, user.password);</span></span>
<span class="line"><span style="color:#24292e;">      if (match) {</span></span>
<span class="line"><span style="color:#24292e;">        this.logger.log(&#39;ç”¨æˆ·åå¯†ç è®¤è¯æˆåŠŸ&#39;);</span></span>
<span class="line"><span style="color:#24292e;">        const { password, ...result } = user;</span></span>
<span class="line"><span style="color:#24292e;">        return result;</span></span>
<span class="line"><span style="color:#24292e;">      }</span></span>
<span class="line"><span style="color:#24292e;">      this.logger.error(&#39;å¯†ç é”™è¯¯.&#39;);</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">    this.logger.error(&#39;ç”¨æˆ·åå¯†ç è®¤è¯å¤±è´¥&#39;);</span></span>
<span class="line"><span style="color:#24292e;">    return null;</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h3 id="_3-æä¾›ç­–ç•¥" tabindex="-1">3. æä¾›ç­–ç•¥ <a class="header-anchor" href="#_3-æä¾›ç­–ç•¥" aria-label="Permalink to &quot;3. æä¾›ç­–ç•¥&quot;">â€‹</a></h3><p>ä¹Ÿå°±æ˜¯å¼€ç¯‡è®²çš„é‚£ä¸¤ç‚¹ï¼Œç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç°ä¸€ä¸ªæ–¹æ³•</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Strategy } from &#39;passport-local&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { Injectable, UnauthorizedException } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { PassportStrategy } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AuthService } from &#39;./auth.service&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">// name: &#39;local&#39; é»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class LocalStrategy extends PassportStrategy(Strategy, &#39;local&#39;) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor(private authService: AuthService) {</span></span>
<span class="line"><span style="color:#e1e4e8;">     // è¿™é‡Œé»˜è®¤ä¸ç”¨é…ç½®ï¼Œå‡è®¾çš„æ˜¯ä½ çš„Userå®ä½“ä¸­å±æ€§åä¸ºusernameå’Œpassword</span></span>
<span class="line"><span style="color:#e1e4e8;">     // å¦‚æœä¸æ˜¯çš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ˜¯usernameField:xxå’ŒpasswordField:xxx</span></span>
<span class="line"><span style="color:#e1e4e8;">    super();</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  async validate(username: string, password: string) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    const user = this.authService.validateUser(username, password);</span></span>
<span class="line"><span style="color:#e1e4e8;">    if (!user) {</span></span>
<span class="line"><span style="color:#e1e4e8;">      throw new UnauthorizedException();</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">    return user;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Strategy } from &#39;passport-local&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { Injectable, UnauthorizedException } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { PassportStrategy } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AuthService } from &#39;./auth.service&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">// name: &#39;local&#39; é»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class LocalStrategy extends PassportStrategy(Strategy, &#39;local&#39;) {</span></span>
<span class="line"><span style="color:#24292e;">  constructor(private authService: AuthService) {</span></span>
<span class="line"><span style="color:#24292e;">     // è¿™é‡Œé»˜è®¤ä¸ç”¨é…ç½®ï¼Œå‡è®¾çš„æ˜¯ä½ çš„Userå®ä½“ä¸­å±æ€§åä¸ºusernameå’Œpassword</span></span>
<span class="line"><span style="color:#24292e;">     // å¦‚æœä¸æ˜¯çš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ˜¯usernameField:xxå’ŒpasswordField:xxx</span></span>
<span class="line"><span style="color:#24292e;">    super();</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  async validate(username: string, password: string) {</span></span>
<span class="line"><span style="color:#24292e;">    const user = this.authService.validateUser(username, password);</span></span>
<span class="line"><span style="color:#24292e;">    if (!user) {</span></span>
<span class="line"><span style="color:#24292e;">      throw new UnauthorizedException();</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">    return user;</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h3 id="_4-åˆ›å»ºguard" tabindex="-1">4. åˆ›å»ºGuard <a class="header-anchor" href="#_4-åˆ›å»ºguard" aria-label="Permalink to &quot;4. åˆ›å»ºGuard&quot;">â€‹</a></h3><p>æ„å»ºä¸€ä¸ªLocalAuthGuard</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class LocalAuthGuard extends AuthGuard(&#39;local&#39;) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class LocalAuthGuard extends AuthGuard(&#39;local&#39;) {}</span></span></code></pre></div><h3 id="_5-ä½¿ç”¨" tabindex="-1">5. ä½¿ç”¨ <a class="header-anchor" href="#_5-ä½¿ç”¨" aria-label="Permalink to &quot;5. ä½¿ç”¨&quot;">â€‹</a></h3><p>ç›´æ¥ä½¿ç”¨UseGuards(å¡«å†™å¯¹åº”çš„Guard)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Controller, Get, Post, Request, UseGuards } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AppService } from &#39;./app.service&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { LocalAuthGuard } from &#39;./auth/local-auth.guard&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Controller()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class AppController {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor(private readonly appService: AppService) {}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  @UseGuards(LocalAuthGuard)</span></span>
<span class="line"><span style="color:#e1e4e8;">  @Post(&#39;auth/login&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">  async login(@Request() req) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    return req.user;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Controller, Get, Post, Request, UseGuards } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AppService } from &#39;./app.service&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { LocalAuthGuard } from &#39;./auth/local-auth.guard&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Controller()</span></span>
<span class="line"><span style="color:#24292e;">export class AppController {</span></span>
<span class="line"><span style="color:#24292e;">  constructor(private readonly appService: AppService) {}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  @UseGuards(LocalAuthGuard)</span></span>
<span class="line"><span style="color:#24292e;">  @Post(&#39;auth/login&#39;)</span></span>
<span class="line"><span style="color:#24292e;">  async login(@Request() req) {</span></span>
<span class="line"><span style="color:#24292e;">    return req.user;</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p>ä½¿ç”¨äº†UseGuardsåï¼Œä¼šè‡ªåŠ¨è¿›è¡ŒéªŒè¯ï¼ŒPassprotä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªuserçš„objectæ”¾åˆ°reqä¸Šï¼Œè¿™ä¸ªobjectå…¶å®å°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„é‚£ä¸ªç±»ä¸­å®ç°çš„validateæ–¹æ³•è¿”å›çš„user</p><h4 id="éªŒè¯" tabindex="-1">éªŒè¯ <a class="header-anchor" href="#éªŒè¯" aria-label="Permalink to &quot;éªŒè¯&quot;">â€‹</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66f90ec964ca4853a2dd79b72785b8b9~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/403ca438da7f4c439a4217b64ca5e1a4~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h2 id="ä¸‰ã€jwtçš„ä½¿ç”¨" tabindex="-1">ä¸‰ã€JWTçš„ä½¿ç”¨ <a class="header-anchor" href="#ä¸‰ã€jwtçš„ä½¿ç”¨" aria-label="Permalink to &quot;ä¸‰ã€JWTçš„ä½¿ç”¨&quot;">â€‹</a></h2><p>jwtå…¶å®å°±æ˜¯ç™»å½•çš„æ—¶å€™å°†ç”¨æˆ·å(æˆ–å…¶ä»–æƒ³æ”¾è¿›å»çš„ä¿¡æ¯)é…åˆä¸€ä¸ªå¯†é’¥ç”Ÿæˆä¸€ä¸ªtokenï¼Œè¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯ä¿ç•™åœ¨æŸä¸ªä½ç½®ï¼Œå‰ç«¯ä¹‹åå‘èµ·çš„è¯·æ±‚éƒ½å¸¦ç€è¿™ä¸ªtokenæ¥ï¼Œåç«¯è¿›è¡Œç›¸åº”çš„é‰´æƒå“åº”</p><p>å…ˆå®‰è£…ä¾èµ–åŒ…</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ npm install --save @nestjs/jwt passport-jwt</span></span>
<span class="line"><span style="color:#e1e4e8;">$ npm install --save-dev @types/passport-jwt</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ npm install --save @nestjs/jwt passport-jwt</span></span>
<span class="line"><span style="color:#24292e;">$ npm install --save-dev @types/passport-jwt</span></span></code></pre></div><p>æ­¥éª¤åˆ†ä¸ºä¸€ä¸‹å‡ æ­¥ï¼š</p><h3 id="_1-å¯¼å…¥jwtmodule" tabindex="-1">1. å¯¼å…¥JwtModule <a class="header-anchor" href="#_1-å¯¼å…¥jwtmodule" aria-label="Permalink to &quot;1. å¯¼å…¥JwtModule&quot;">â€‹</a></h3><p>åœ¨auth-moduleçš„importsä¸­å¼•å…¥æ³¨å†ŒJwtModuleï¼Œé…ç½®ç›¸å…³ä¿¡æ¯</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">imports:[</span></span>
<span class="line"><span style="color:#e1e4e8;">  ...,</span></span>
<span class="line"><span style="color:#e1e4e8;">  JwtModule.register({</span></span>
<span class="line"><span style="color:#e1e4e8;">    secret: jwtConstants.secret,</span></span>
<span class="line"><span style="color:#e1e4e8;">    signOptions: {</span></span>
<span class="line"><span style="color:#e1e4e8;">      expiresIn: &#39;4h&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">  }),</span></span>
<span class="line"><span style="color:#e1e4e8;">  ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">imports:[</span></span>
<span class="line"><span style="color:#24292e;">  ...,</span></span>
<span class="line"><span style="color:#24292e;">  JwtModule.register({</span></span>
<span class="line"><span style="color:#24292e;">    secret: jwtConstants.secret,</span></span>
<span class="line"><span style="color:#24292e;">    signOptions: {</span></span>
<span class="line"><span style="color:#24292e;">      expiresIn: &#39;4h&#39;,</span></span>
<span class="line"><span style="color:#24292e;">    },</span></span>
<span class="line"><span style="color:#24292e;">  }),</span></span>
<span class="line"><span style="color:#24292e;">  ]</span></span></code></pre></div><h3 id="_2-æä¾›jwtéªŒè¯ç­–ç•¥" tabindex="-1">2. æä¾›JwtéªŒè¯ç­–ç•¥ <a class="header-anchor" href="#_2-æä¾›jwtéªŒè¯ç­–ç•¥" aria-label="Permalink to &quot;2. æä¾›JwtéªŒè¯ç­–ç•¥&quot;">â€‹</a></h3><p>éœ€è¦åœ¨auth-moduleçš„providersçš„ä¸­æä¾›ç›¸åº”çš„ç­–ç•¥ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨è¿˜æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºjwtéªŒè¯ç­–ç•¥JwtStrategyï¼Œå®ƒéœ€è¦ç»§æ‰¿PassportStrategy(Strategy, name?)ï¼Œå…¶ä¸­Strategyæ¥è‡ªäºpassport-jwtï¼Œnameæ˜¯å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯jwtï¼Œ</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { ExtractJwt, Strategy } from &#39;passport-jwt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { PassportStrategy } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { jwtConstants } from &#39;./constants&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class JwtStrategy extends PassportStrategy(Strategy, &#39;customJwt&#39;) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor() {</span></span>
<span class="line"><span style="color:#e1e4e8;">    super({</span></span>
<span class="line"><span style="color:#e1e4e8;">      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),</span></span>
<span class="line"><span style="color:#e1e4e8;">      ignoreExpiration: false,</span></span>
<span class="line"><span style="color:#e1e4e8;">      secretOrKey: jwtConstants.secret,</span></span>
<span class="line"><span style="color:#e1e4e8;">    });</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  async validate(payload: any) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    //èƒ½åˆ°è¿™é‡Œæ¥è¯´æ˜ä¸€å®šæ˜¯ä¸€ä¸ªä¹‹å‰ç­¾è¿‡åçš„ç”¨æˆ·ï¼Œä¸ç„¶ä¸ä¼šè¿›åˆ°è¯¥å‡½æ•°ï¼Œç›´æ¥è¿”å›401é”™è¯¯äº†</span></span>
<span class="line"><span style="color:#e1e4e8;">    return { userId: payload.sub, username: payload.username };</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { ExtractJwt, Strategy } from &#39;passport-jwt&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { PassportStrategy } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { jwtConstants } from &#39;./constants&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class JwtStrategy extends PassportStrategy(Strategy, &#39;customJwt&#39;) {</span></span>
<span class="line"><span style="color:#24292e;">  constructor() {</span></span>
<span class="line"><span style="color:#24292e;">    super({</span></span>
<span class="line"><span style="color:#24292e;">      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),</span></span>
<span class="line"><span style="color:#24292e;">      ignoreExpiration: false,</span></span>
<span class="line"><span style="color:#24292e;">      secretOrKey: jwtConstants.secret,</span></span>
<span class="line"><span style="color:#24292e;">    });</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  async validate(payload: any) {</span></span>
<span class="line"><span style="color:#24292e;">    //èƒ½åˆ°è¿™é‡Œæ¥è¯´æ˜ä¸€å®šæ˜¯ä¸€ä¸ªä¹‹å‰ç­¾è¿‡åçš„ç”¨æˆ·ï¼Œä¸ç„¶ä¸ä¼šè¿›åˆ°è¯¥å‡½æ•°ï¼Œç›´æ¥è¿”å›401é”™è¯¯äº†</span></span>
<span class="line"><span style="color:#24292e;">    return { userId: payload.sub, username: payload.username };</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p>åˆ›å»ºå¥½ä¹‹åå°†JwtStrategyåŠ å…¥åˆ°auth-moduleçš„providersä¸­</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">providers: [</span></span>
<span class="line"><span style="color:#e1e4e8;">   ...,</span></span>
<span class="line"><span style="color:#e1e4e8;">    JwtStrategy,</span></span>
<span class="line"><span style="color:#e1e4e8;">  ],</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">providers: [</span></span>
<span class="line"><span style="color:#24292e;">   ...,</span></span>
<span class="line"><span style="color:#24292e;">    JwtStrategy,</span></span>
<span class="line"><span style="color:#24292e;">  ],</span></span></code></pre></div><h3 id="_3-æ„å»ºguard" tabindex="-1">3. æ„å»ºGuard <a class="header-anchor" href="#_3-æ„å»ºguard" aria-label="Permalink to &quot;3. æ„å»ºGuard&quot;">â€‹</a></h3><p>ç­–ç•¥åšå¥½åå°±åˆ›å»ºxxxGuardï¼Œéœ€è¦ç»§æ‰¿è‡ªAuthGuard(è¿™é‡Œçš„åå­—å°±æ˜¯åˆ›å»ºç­–ç•¥æ—¶çš„é‚£ä¸ªname)ï¼Œå¯ä»¥ä½œä¸º@UseGuard()è£…é¥°å™¨çš„å‚æ•°ï¼Œ</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { ExecutionContext, Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class JwtAuthGuard extends AuthGuard(&#39;customJwt&#39;) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { ExecutionContext, Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class JwtAuthGuard extends AuthGuard(&#39;customJwt&#39;) {}</span></span></code></pre></div><p>è¿™æ ·åšä»¥åï¼Œæ¯å½“ä½¿ç”¨è¯¥JwtAuthGuardçš„æ—¶å€™ï¼Œéƒ½ä¼šæ‰¾åˆ°JwtStrategyè¿›è¡Œå…ˆå‰éªŒè¯ï¼Œè¿™ä¸ªå¯»æ‰¾çš„è¿‡ç¨‹æ‰¾çš„å°±æ˜¯nameè¿™ä¸ªå±æ€§</p><h3 id="_4-ä½¿ç”¨" tabindex="-1">4. ä½¿ç”¨ <a class="header-anchor" href="#_4-ä½¿ç”¨" aria-label="Permalink to &quot;4. ä½¿ç”¨&quot;">â€‹</a></h3><p>ä»¥ä¸Šå·¥ä½œå®Œæˆåå°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼</p><p>ä½¿ç”¨æ–¹å¼ï¼š@UseGuards(è¿™é‡Œå¡«åˆ›å»ºå¥½çš„Guardï¼Œå¦‚JwtAuthGuard)</p><ul><li>åœ¨Controllerä¸Šä½¿ç”¨ï¼Œåˆ™è¯¥æ§åˆ¶å™¨ä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½è¦ç»è¿‡jwtçš„tokenéªŒè¯</li><li>åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ï¼Œåªæœ‰è¯¥æ–¹æ³•éœ€è¦ç»è¿‡jwtçš„tokenéªŒè¯</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">@UseGuards(JwtAuthGuard)</span></span>
<span class="line"><span style="color:#e1e4e8;">@Get(&#39;hello&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">getHello(@Request() req) {</span></span>
<span class="line"><span style="color:#e1e4e8;">	return req.user;</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">@UseGuards(JwtAuthGuard)</span></span>
<span class="line"><span style="color:#24292e;">@Get(&#39;hello&#39;)</span></span>
<span class="line"><span style="color:#24292e;">getHello(@Request() req) {</span></span>
<span class="line"><span style="color:#24292e;">	return req.user;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><h2 id="å››ã€å…¨å±€ä½¿ç”¨guard" tabindex="-1">å››ã€å…¨å±€ä½¿ç”¨Guard <a class="header-anchor" href="#å››ã€å…¨å±€ä½¿ç”¨guard" aria-label="Permalink to &quot;å››ã€å…¨å±€ä½¿ç”¨Guard&quot;">â€‹</a></h2><p>ç±»ä¼¼jwtè¿™ç§tokenè®¤è¯ï¼Œå‡ ä¹æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæºå¸¦ï¼Œå¦‚æœè¦ç»™æ‰€æœ‰çš„è¯·æ±‚éƒ½åŠ ä¸Š@UseGuards(JwtAuthGuard)æœªå…æœ‰äº›è¿‡äºç¹çï¼Œå› æ­¤nestjsæä¾›äº†ä¸€ç§å…¨å±€ä½¿ç”¨çš„æ–¹æ³•</p><h3 id="_1-æ³¨å†Œå…¨å±€guard" tabindex="-1">1. æ³¨å†Œå…¨å±€guard <a class="header-anchor" href="#_1-æ³¨å†Œå…¨å±€guard" aria-label="Permalink to &quot;1. æ³¨å†Œå…¨å±€guard&quot;">â€‹</a></h3><p>å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªæ¨¡å—è¿›è¡Œï¼Œä¸è¿‡æˆ‘ä»¬å°±åœ¨authæ¨¡å—è¿›è¡Œäº†ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { Module } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { APP_GUARD } from &#39;@nestjs/core&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { JwtAuthGuard } from &#39;./jwt-auth.guard&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Module({</span></span>
<span class="line"><span style="color:#e1e4e8;">  providers: [</span></span>
<span class="line"><span style="color:#e1e4e8;">  ...,</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      provide: APP_GUARD,</span></span>
<span class="line"><span style="color:#e1e4e8;">      useClass: JwtAuthGuard,</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">  ],</span></span>
<span class="line"><span style="color:#e1e4e8;">})</span></span>
<span class="line"><span style="color:#e1e4e8;">export class AuthModule {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { Module } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { APP_GUARD } from &#39;@nestjs/core&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { JwtAuthGuard } from &#39;./jwt-auth.guard&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Module({</span></span>
<span class="line"><span style="color:#24292e;">  providers: [</span></span>
<span class="line"><span style="color:#24292e;">  ...,</span></span>
<span class="line"><span style="color:#24292e;">    {</span></span>
<span class="line"><span style="color:#24292e;">      provide: APP_GUARD,</span></span>
<span class="line"><span style="color:#24292e;">      useClass: JwtAuthGuard,</span></span>
<span class="line"><span style="color:#24292e;">    },</span></span>
<span class="line"><span style="color:#24292e;">  ],</span></span>
<span class="line"><span style="color:#24292e;">})</span></span>
<span class="line"><span style="color:#24292e;">export class AuthModule {}</span></span></code></pre></div><h3 id="_2-è‡ªå®šä¹‰publicè£…é¥°å™¨" tabindex="-1">2. è‡ªå®šä¹‰Publicè£…é¥°å™¨ <a class="header-anchor" href="#_2-è‡ªå®šä¹‰publicè£…é¥°å™¨" aria-label="Permalink to &quot;2. è‡ªå®šä¹‰Publicè£…é¥°å™¨&quot;">â€‹</a></h3><p>åå­—è‡ªé€‰</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { SetMetadata } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">export const IS_PUBLIC_KEY = &#39;isPublic&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">export const Public = () =&gt; SetMetadata(IS_PUBLIC_KEY, true);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { SetMetadata } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">export const IS_PUBLIC_KEY = &#39;isPublic&#39;;</span></span>
<span class="line"><span style="color:#24292e;">export const Public = () =&gt; SetMetadata(IS_PUBLIC_KEY, true);</span></span></code></pre></div><h3 id="_3-é‡å†™jwtauthguard" tabindex="-1">3. é‡å†™JwtAuthGuard <a class="header-anchor" href="#_3-é‡å†™jwtauthguard" aria-label="Permalink to &quot;3. é‡å†™JwtAuthGuard&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">import { ExecutionContext, Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { Reflector } from &#39;@nestjs/core&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { Observable } from &#39;rxjs&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">import { IS_PUBLIC_KEY } from &#39;./public-auth.decorator&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">@Injectable()</span></span>
<span class="line"><span style="color:#e1e4e8;">export class JwtAuthGuard extends AuthGuard(&#39;customJwt&#39;) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor(private reflector: Reflector) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    super();</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  canActivate(</span></span>
<span class="line"><span style="color:#e1e4e8;">    context: ExecutionContext,</span></span>
<span class="line"><span style="color:#e1e4e8;">  ): boolean | Promise&lt;boolean&gt; | Observable&lt;boolean&gt; {</span></span>
<span class="line"><span style="color:#e1e4e8;">    // ç”¨æ¥è¿‡æ»¤ç™½åå•ï¼Œè¢«@Publicè£…é¥°å™¨ä¿®é¥°çš„æ§åˆ¶å™¨ç›´æ¥è·³è¿‡ä¸åšéªŒè¯</span></span>
<span class="line"><span style="color:#e1e4e8;">    const isPublic = this.reflector.getAllAndOverride&lt;boolean&gt;(IS_PUBLIC_KEY, [</span></span>
<span class="line"><span style="color:#e1e4e8;">      context.getHandler(),</span></span>
<span class="line"><span style="color:#e1e4e8;">      context.getClass(),</span></span>
<span class="line"><span style="color:#e1e4e8;">    ]);</span></span>
<span class="line"><span style="color:#e1e4e8;">    if (isPublic) {</span></span>
<span class="line"><span style="color:#e1e4e8;">      return true;</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">    return super.canActivate(context);</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">import { ExecutionContext, Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { AuthGuard } from &#39;@nestjs/passport&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { Reflector } from &#39;@nestjs/core&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { Observable } from &#39;rxjs&#39;;</span></span>
<span class="line"><span style="color:#24292e;">import { IS_PUBLIC_KEY } from &#39;./public-auth.decorator&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">@Injectable()</span></span>
<span class="line"><span style="color:#24292e;">export class JwtAuthGuard extends AuthGuard(&#39;customJwt&#39;) {</span></span>
<span class="line"><span style="color:#24292e;">  constructor(private reflector: Reflector) {</span></span>
<span class="line"><span style="color:#24292e;">    super();</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  canActivate(</span></span>
<span class="line"><span style="color:#24292e;">    context: ExecutionContext,</span></span>
<span class="line"><span style="color:#24292e;">  ): boolean | Promise&lt;boolean&gt; | Observable&lt;boolean&gt; {</span></span>
<span class="line"><span style="color:#24292e;">    // ç”¨æ¥è¿‡æ»¤ç™½åå•ï¼Œè¢«@Publicè£…é¥°å™¨ä¿®é¥°çš„æ§åˆ¶å™¨ç›´æ¥è·³è¿‡ä¸åšéªŒè¯</span></span>
<span class="line"><span style="color:#24292e;">    const isPublic = this.reflector.getAllAndOverride&lt;boolean&gt;(IS_PUBLIC_KEY, [</span></span>
<span class="line"><span style="color:#24292e;">      context.getHandler(),</span></span>
<span class="line"><span style="color:#24292e;">      context.getClass(),</span></span>
<span class="line"><span style="color:#24292e;">    ]);</span></span>
<span class="line"><span style="color:#24292e;">    if (isPublic) {</span></span>
<span class="line"><span style="color:#24292e;">      return true;</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">    return super.canActivate(context);</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p>ä¸Šé¢çš„æ„æ€å°±æ˜¯è¯´ï¼Œåªè¦æ˜¯è¢«@Public()ä¿®é¥°çš„ï¼Œéƒ½ä¸åšéªŒè¯ï¼Œå…¶å®ƒçš„éƒ½è¿˜æ˜¯ç»è¿‡super.canActivate(context)çš„éªŒè¯</p><h3 id="_4-ä½¿ç”¨-1" tabindex="-1">4. ä½¿ç”¨ <a class="header-anchor" href="#_4-ä½¿ç”¨-1" aria-label="Permalink to &quot;4. ä½¿ç”¨&quot;">â€‹</a></h3><p>ç›´æ¥åœ¨éœ€è¦è¿‡æ»¤çš„æ–¹æ³•æˆ–è€…Controllerä¸Šæ·»åŠ @Public()è£…é¥°å™¨å°±å¯ä»¥äº†</p></div></div></main><footer class="VPDocFooter" data-v-2cdec040 data-v-c47f21a7><!--[--><!--]--><!----><nav class="prev-next" data-v-c47f21a7><div class="pager" data-v-c47f21a7><a class="pager-link prev" href="/blog/backend/nestjs/NestJS%E8%BF%9B%E9%98%B6/6.%E7%BC%93%E5%AD%98(todo).html" data-v-c47f21a7><span class="desc" data-v-c47f21a7>Previous page</span><span class="title" data-v-c47f21a7>6.ç¼“å­˜(todo)</span></a></div><div class="pager" data-v-c47f21a7><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"backend_nginx_åŸºç¡€çŸ¥è¯†_3.æ›¿æ¢æ¨¡å—.md\":\"d416ed02\",\"backend_gitlearn_è¿œç¨‹ä»“åº“_2.pullæ‹‰å–æ›´æ–°.md\":\"a35b2a86\",\"backend_nginx_åŸºç¡€çŸ¥è¯†_2.éšæœºä¸»é¡µæ¨¡å—.md\":\"ff0ce865\",\"backend_gitlearn_è¿œç¨‹ä»“åº“_3.push.md\":\"edfe096f\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_2.å·¥ä½œåŒºå’Œæš‚å­˜åŒº.md\":\"de09da48\",\"backend_gitlearn_index.md\":\"add6fc06\",\"backend_gitlearn_åŸºæœ¬é…ç½®_2.é…ç½®åˆ«å.md\":\"a1e4ed69\",\"backend_nestjs_nestjsè¿›é˜¶_4.æ•´åˆprisma(todo).md\":\"14f26c81\",\"backend_nestjs_nestjsè¿›é˜¶_5.é«˜çº§é…ç½®(todo).md\":\"e86f68c4\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_5.stashingä¸´æ—¶å­˜å‚¨å·¥ä½œ.md\":\"c2523c6e\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_3.åˆ†æ”¯ç®¡ç†.md\":\"e2768843\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_4.reset.md\":\"0a571ce0\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_6.tagæ‰“æ ‡ç­¾.md\":\"a3fc29b3\",\"backend_gitlearn_è¿œç¨‹ä»“åº“_1.github.md\":\"2463411f\",\"backend_nginx_åŸºç¡€çŸ¥è¯†_4.æ–‡ä»¶è¯»å–æ¨¡å—.md\":\"9a8f147c\",\"backend_nginx_åŸºç¡€çŸ¥è¯†_5.æ–‡ä»¶å‹ç¼©æ¨¡å—.md\":\"ea8e24b2\",\"backend_nginx_åŸºç¡€çŸ¥è¯†_6.é¡µé¢ç¼“å­˜æ¨¡å—.md\":\"40ba04ac\",\"backend_nginx_é…ç½®ç›¸å…³_1.é»˜è®¤é…ç½®.md\":\"c12a5381\",\"backend_nginx_é…ç½®ç›¸å…³_2.ä¸»é…ç½®æ–‡ä»¶.md\":\"710f0a67\",\"backend_nginx_é…ç½®ç›¸å…³_3.å­é…ç½®ç›®å½•.md\":\"58440e7e\",\"backend_nginx_é…ç½®ç›¸å…³_4.location.md\":\"94862ca6\",\"backend_nginx_é…ç½®ç›¸å…³_5.ä»£ç†.md\":\"22d3ee0d\",\"backend_nginx_é…ç½®ç›¸å…³_6.proxyä»£ç†.md\":\"c24e964b\",\"frontend_css_index.md\":\"f31eb3bc\",\"backend_nestjs_index.md\":\"0cc973b6\",\"frontend_typescript_index.md\":\"eaf6aa4a\",\"frontend_vue_index.md\":\"5482f470\",\"index.md\":\"35167b2e\",\"backend_nestjs_å®‰å…¨è®¤è¯_1.ç™»å½•è®¤è¯(jwt).md\":\"9353c18b\",\"backend_nginx_index.md\":\"51af2231\",\"backend_nginx_å…¶å®ƒ_1.æ—¥å¿—.md\":\"8a80edbc\",\"backend_nginx_å…¶å®ƒ_2.æ–‡ä»¶å…³è”ç¨‹åº.md\":\"69d574e4\",\"backend_nginx_å…¶å®ƒ_3.httpçŠ¶æ€ç .md\":\"132de733\",\"backend_nestjs_nestjsè¿›é˜¶_6.ç¼“å­˜(todo).md\":\"ac4d017b\",\"backend_nginx_åŸºç¡€çŸ¥è¯†_1.è¿æ¥çŠ¶æ€æ¨¡å—.md\":\"da14b41d\",\"backend_nestjs_nestjsè¿›é˜¶_1.ä¾èµ–æ³¨å…¥.md\":\"544d345a\",\"backend_gitlearn_å¸¸ç”¨å‘½ä»¤_1.å¸¸ç”¨å‘½ä»¤.md\":\"b2e79cad\",\"frontend_html_index.md\":\"faa0e581\",\"frontend_javascript_index.md\":\"b02c3c83\",\"backend_gitlearn_åŸºæœ¬é…ç½®_1.åˆè¯†é…ç½®.md\":\"f8539a03\",\"backend_nestjs_nestjsè¿›é˜¶_2.ç”Ÿå‘½å‘¨æœŸ.md\":\"30e0d689\",\"frontend_ui_index.md\":\"61922c0b\",\"backend_nestjs_nestjsè¿›é˜¶_3.æ‰“åŒ…éƒ¨ç½²(âš‘).md\":\"a4ff6021\",\"backend_nestjs_nestjsåŸºç¡€_2.æ ¸å¿ƒæ¦‚å¿µå°ç»“.md\":\"823ecc50\",\"backend_nestjs_nestjsåŸºç¡€_3.executioncontext.md\":\"35056e53\",\"backend_nestjs_nestjsåŸºç¡€_1.ä¹å¤§æ ¸å¿ƒæ¦‚å¿µ.md\":\"fb4be291\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"kkzzyytçš„ä¸ªäººè®°å½•\",\"description\":\"Talk is cheap, show me your code.\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"ğŸ“ code\",\"logo\":\"/img/logo.png\",\"nav\":[{\"text\":\"é¦–é¡µ\",\"link\":\"/index\"},{\"text\":\"å‰ç«¯å°é£Ÿå ‚\",\"activeMatch\":\"frontend\",\"items\":[{\"text\":\"åŸºæœ¬åŠŸ\",\"items\":[{\"text\":\"Html\",\"link\":\"/frontend/html/\"},{\"text\":\"CSS\",\"link\":\"/frontend/css/\"},{\"text\":\"JavaScript\",\"link\":\"/frontend/javascript/\"},{\"text\":\"TypeScript\",\"link\":\"/frontend/typescript/\"}]},{\"text\":\"æ¡†æ¶\",\"items\":[{\"text\":\"React\",\"link\":\"/frontend/react/\"},{\"text\":\"Vue\",\"link\":\"/frontend/vue/\"}]},{\"text\":\"ä¸°å¯Œèµ„æº\",\"items\":[{\"text\":\"ç»„ä»¶åº“\",\"link\":\"/frontend/ui/\"}]}]},{\"text\":\"åç«¯è‡ªä¹ å®¤\",\"activeMatch\":\"/backend/\",\"items\":[{\"text\":\"æ¡†æ¶\",\"items\":[{\"text\":\"NestJS\",\"link\":\"/backend/nestjs/\"}]},{\"text\":\"æœåŠ¡\",\"items\":[{\"text\":\"Nginx\",\"link\":\"/backend/nginx/\"},{\"text\":\"Git\",\"link\":\"/backend/gitLearn/\"}]}]}],\"sidebar\":{\"/backend/nestjs/\":[{\"text\":\"NestJSåŸºç¡€\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.ä¹å¤§æ ¸å¿ƒæ¦‚å¿µ\",\"link\":\"/backend/nestjs/NestJSåŸºç¡€/1.ä¹å¤§æ ¸å¿ƒæ¦‚å¿µ\"},{\"text\":\"2.æ ¸å¿ƒæ¦‚å¿µå°ç»“\",\"link\":\"/backend/nestjs/NestJSåŸºç¡€/2.æ ¸å¿ƒæ¦‚å¿µå°ç»“\"},{\"text\":\"3.ExecutionContext\",\"link\":\"/backend/nestjs/NestJSåŸºç¡€/3.ExecutionContext\"}]},{\"text\":\"NestJSè¿›é˜¶\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.ä¾èµ–æ³¨å…¥\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/1.ä¾èµ–æ³¨å…¥\"},{\"text\":\"2.ç”Ÿå‘½å‘¨æœŸ\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/2.ç”Ÿå‘½å‘¨æœŸ\"},{\"text\":\"3.æ‰“åŒ…éƒ¨ç½²(âš‘)\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/3.æ‰“åŒ…éƒ¨ç½²(âš‘)\"},{\"text\":\"4.æ•´åˆprisma(todo)\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/4.æ•´åˆprisma(todo)\"},{\"text\":\"5.é«˜çº§é…ç½®(todo)\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/5.é«˜çº§é…ç½®(todo)\"},{\"text\":\"6.ç¼“å­˜(todo)\",\"link\":\"/backend/nestjs/NestJSè¿›é˜¶/6.ç¼“å­˜(todo)\"}]},{\"text\":\"å®‰å…¨è®¤è¯\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.ç™»å½•è®¤è¯(JWT)\",\"link\":\"/backend/nestjs/å®‰å…¨è®¤è¯/1.ç™»å½•è®¤è¯(JWT)\"}]}],\"/backend/nginx/\":[{\"text\":\"åŸºç¡€çŸ¥è¯†\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.è¿æ¥çŠ¶æ€æ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/1.è¿æ¥çŠ¶æ€æ¨¡å—\"},{\"text\":\"2.éšæœºä¸»é¡µæ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/2.éšæœºä¸»é¡µæ¨¡å—\"},{\"text\":\"3.æ›¿æ¢æ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/3.æ›¿æ¢æ¨¡å—\"},{\"text\":\"4.æ–‡ä»¶è¯»å–æ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/4.æ–‡ä»¶è¯»å–æ¨¡å—\"},{\"text\":\"5.æ–‡ä»¶å‹ç¼©æ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/5.æ–‡ä»¶å‹ç¼©æ¨¡å—\"},{\"text\":\"6.é¡µé¢ç¼“å­˜æ¨¡å—\",\"link\":\"/backend/nginx/åŸºç¡€çŸ¥è¯†/6.é¡µé¢ç¼“å­˜æ¨¡å—\"}]},{\"text\":\"é…ç½®ç›¸å…³\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.é»˜è®¤é…ç½®\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/1.é»˜è®¤é…ç½®\"},{\"text\":\"2.ä¸»é…ç½®æ–‡ä»¶\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/2.ä¸»é…ç½®æ–‡ä»¶\"},{\"text\":\"3.å­é…ç½®ç›®å½•\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/3.å­é…ç½®ç›®å½•\"},{\"text\":\"4.location\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/4.location\"},{\"text\":\"5.ä»£ç†\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/5.ä»£ç†\"},{\"text\":\"6.proxyä»£ç†\",\"link\":\"/backend/nginx/é…ç½®ç›¸å…³/6.proxyä»£ç†\"}]},{\"text\":\"å…¶å®ƒ\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.æ—¥å¿—\",\"link\":\"/backend/nginx/å…¶å®ƒ/1.æ—¥å¿—\"},{\"text\":\"2.æ–‡ä»¶å…³è”ç¨‹åº\",\"link\":\"/backend/nginx/å…¶å®ƒ/2.æ–‡ä»¶å…³è”ç¨‹åº\"},{\"text\":\"3.HTTPçŠ¶æ€ç \",\"link\":\"/backend/nginx/å…¶å®ƒ/3.HTTPçŠ¶æ€ç \"}]}],\"/backend/gitLearn/\":[{\"text\":\"åŸºæœ¬é…ç½®\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.åˆè¯†é…ç½®\",\"link\":\"/backend/gitLearn/åŸºæœ¬é…ç½®/1.åˆè¯†é…ç½®\"},{\"text\":\"2.é…ç½®åˆ«å\",\"link\":\"/backend/gitLearn/åŸºæœ¬é…ç½®/2.é…ç½®åˆ«å\"}]},{\"text\":\"å¸¸ç”¨å‘½ä»¤\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.å¸¸ç”¨å‘½ä»¤\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/1.å¸¸ç”¨å‘½ä»¤\"},{\"text\":\"2.å·¥ä½œåŒºå’Œæš‚å­˜åŒº\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/2.å·¥ä½œåŒºå’Œæš‚å­˜åŒº\"},{\"text\":\"3.åˆ†æ”¯ç®¡ç†\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/3.åˆ†æ”¯ç®¡ç†\"},{\"text\":\"4.reset\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/4.reset\"},{\"text\":\"5.stashingä¸´æ—¶å­˜å‚¨å·¥ä½œ\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/5.stashingä¸´æ—¶å­˜å‚¨å·¥ä½œ\"},{\"text\":\"6.Tagæ‰“æ ‡ç­¾\",\"link\":\"/backend/gitLearn/å¸¸ç”¨å‘½ä»¤/6.Tagæ‰“æ ‡ç­¾\"}]},{\"text\":\"è¿œç¨‹ä»“åº“\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"1.github\",\"link\":\"/backend/gitLearn/è¿œç¨‹ä»“åº“/1.github\"},{\"text\":\"2.pullæ‹‰å–æ›´æ–°\",\"link\":\"/backend/gitLearn/è¿œç¨‹ä»“åº“/2.pullæ‹‰å–æ›´æ–°\"},{\"text\":\"3.push\",\"link\":\"/backend/gitLearn/è¿œç¨‹ä»“åº“/3.push\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zhu325\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>